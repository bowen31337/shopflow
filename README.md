# ShopFlow - Modern E-Commerce Platform

A fully functional e-commerce platform built with React, Express, and SQLite. Features include product browsing, shopping cart, checkout with Stripe integration, user accounts, reviews, wishlist, and an admin dashboard.

## üöÄ Quick Start

### Prerequisites

- Node.js 16+ and npm
- Git

### Installation

1. Clone or navigate to this repository
2. Run the setup script:

```bash
./init.sh
```

This script will:
- Create the project structure
- Install all backend and frontend dependencies
- Generate JWT secrets
- Create the necessary environment files

### Running the Application

#### Start Backend Server

```bash
cd server
npm run dev
```

Backend will run on `http://localhost:3001`

#### Start Frontend (in a new terminal)

```bash
cd client
npm run dev
```

Frontend will run on `http://localhost:5173`

## üìã Features

### Customer Features

- **Product Catalog**
  - Grid/list view toggle
  - Product detail pages with image galleries
  - Product variants (size, color)
  - Stock availability indicators
  - Related products
  - Recently viewed products

- **Search & Filters**
  - Full-text product search
  - Search autocomplete
  - Category and subcategory filtering
  - Brand filtering
  - Price range filtering
  - Multiple sort options (price, popularity, newest, rating)
  - Pagination and infinite scroll

- **Shopping Cart**
  - Add/remove items
  - Update quantities
  - Save for later
  - Cart persistence (localStorage + server sync)
  - Promo code support
  - Estimated shipping

- **User Accounts**
  - Registration and login
  - Social login (Google - mock)
  - Password reset
  - Profile management
  - Address book (multiple addresses)
  - Order history
  - Wishlist

- **Checkout**
  - Multi-step checkout wizard
  - Guest checkout option
  - Address autocomplete
  - Multiple shipping methods
  - Stripe payment integration
  - Order confirmation

- **Orders**
  - Order tracking
  - Order history
  - Reorder functionality
  - Invoice download (PDF mock)
  - Cancel order (if not shipped)

- **Reviews & Ratings**
  - 5-star rating system
  - Written reviews with photos
  - Helpful/not helpful voting
  - Review filtering and sorting
  - Verified purchase badges
  - Rating distribution charts

- **Wishlist**
  - Add/remove products
  - Share wishlist
  - Move to cart
  - Low stock notifications

### Admin Features

- **Dashboard**
  - Key metrics (revenue, orders, customers)
  - Sales analytics
  - Revenue reports

- **Product Management**
  - Create/edit/delete products
  - Manage product variants
  - Upload multiple images
  - Inventory tracking
  - Category management
  - Brand management

- **Order Management**
  - View all orders
  - Update order status
  - Add tracking numbers
  - View customer details

- **Customer Management**
  - View customer list
  - Customer details and order history
  - Lifetime value tracking

- **Promo Code Management**
  - Create discount codes
  - Set expiry dates and usage limits
  - Track code usage

## üõ† Technology Stack

### Frontend
- React with Vite
- Tailwind CSS (via CDN)
- React Router for navigation
- Zustand for global state management
- React Context for cart state
- React Hook Form for form handling

### Backend
- Node.js with Express
- SQLite with better-sqlite3
- JWT-based authentication
- Bcrypt for password hashing
- Stripe integration (test mode)
- Multer for image uploads

### Database Schema

The application uses SQLite with the following tables:
- `users` - User accounts and authentication
- `addresses` - User shipping addresses
- `categories` - Product categories and subcategories
- `products` - Product information
- `product_images` - Product image URLs
- `product_variants` - Size/color variants
- `brands` - Product brands
- `orders` - Customer orders
- `order_items` - Order line items
- `cart_items` - Shopping cart contents
- `wishlist` - User wishlists
- `reviews` - Product reviews and ratings
- `promo_codes` - Discount codes

## üìê Design System

### Color Palette
- Primary: Emerald (#10B981)
- Secondary: Slate (#475569)
- Background: White, Gray-50
- Text: Gray-900, Gray-600
- Sale/Discount: Red-500
- Success: Green-500
- Warning: Amber-500

### Typography
- Font: Inter, system-ui
- Product titles: font-medium, text-lg
- Prices: font-bold
- Body: text-sm to text-base

## üîë Environment Variables

### Backend (.env in server/)

```
PORT=3001
JWT_SECRET=<auto-generated>
JWT_EXPIRES_IN=24h
REFRESH_TOKEN_SECRET=<auto-generated>
REFRESH_TOKEN_EXPIRES_IN=7d
STRIPE_TEST_KEY=sk_test_your_stripe_test_key_here
NODE_ENV=development
```

**Note:** Update `STRIPE_TEST_KEY` with your actual Stripe test key for payment functionality.

## üöÄ Deployment

This project consists of a React frontend and Express backend, requiring different deployment strategies. Below are recommended deployment options:

### Architecture Overview

- **Frontend**: React + Vite (static site, can be served from CDN)
- **Backend**: Express.js API (requires Node.js runtime)
- **Database**: SQLite (file-based, needs migration for production)

### Recommended Deployment Options

#### Option 1: Vercel (Recommended)

**Why Vercel:**
- Excellent developer experience with automatic deployments from GitHub
- Free tier includes serverless functions (can host Express API)
- Built-in CDN for frontend
- Easy environment variable management
- Automatic HTTPS

**Setup Steps:**

1. **Install Vercel CLI:**
   ```bash
   npm i -g vercel
   ```

2. **Deploy from project root:**
   ```bash
   vercel
   ```

3. **Configure Vercel:**
   - Frontend: Automatically detected as static site (builds from `client/` directory)
   - Backend: Uses Vercel serverless functions via `api/index.js` (see `vercel.json` configuration)
   - Database: **IMPORTANT** - Migrate to Vercel Postgres or external PostgreSQL before deploying

4. **Environment Variables:**
   Add all environment variables in Vercel dashboard:
   ```
   NODE_ENV=production
   JWT_SECRET=<your-secret>
   JWT_EXPIRES_IN=24h
   REFRESH_TOKEN_SECRET=<your-secret>
   REFRESH_TOKEN_EXPIRES_IN=7d
   STRIPE_TEST_KEY=<your-stripe-key>
   STRIPE_SECRET_KEY=<your-stripe-secret>
   DATABASE_URL=<postgres-connection-string>
   DB_TYPE=postgres
   FRONTEND_URL=<your-vercel-frontend-url>
   ```

5. **Database Migration (REQUIRED):**
   - SQLite is not suitable for serverless/production
   - Migrate to PostgreSQL (Vercel Postgres, Supabase, or Railway)
   - Update `server/src/database.js` to support both SQLite (dev) and PostgreSQL (prod)
   - The `api/index.js` handler is configured for serverless but still needs database migration

6. **File Uploads:**
   - The current setup uses local file storage (`server/uploads/`)
   - For production, migrate to cloud storage (AWS S3, Cloudflare R2, etc.)
   - Update upload routes to use cloud storage instead of local filesystem

**Cost**: Free tier sufficient for development/small projects

#### Option 2: Cloudflare Pages + Workers

**Why Cloudflare:**
- Free tier with generous limits
- Global CDN with edge computing
- D1 database (SQLite-compatible) available
- Excellent performance worldwide

**Setup Steps:**

1. **Frontend (Cloudflare Pages):**
   - Connect GitHub repository
   - Build command: `cd client && npm run build`
   - Output directory: `client/dist`

2. **Backend (Cloudflare Workers):**
   - Convert Express routes to Cloudflare Workers
   - Use `@cloudflare/workers-types` for type safety
   - Or use Pages Functions for simpler setup

3. **Database:**
   - Use Cloudflare D1 (SQLite-compatible) for easy migration
   - Or external PostgreSQL service

**Cost**: Free tier sufficient

#### Option 3: Railway/Render (Full-Stack Hosting)

**Why Railway/Render:**
- Designed for full-stack applications
- Easy PostgreSQL setup
- Automatic deployments from GitHub
- Built-in SSL

**Setup Steps:**

1. **Connect Repository:**
   - Link GitHub repository
   - Configure build and start commands

2. **Frontend:**
   - Build command: `cd client && npm run build`
   - Serve static files from `client/dist`

3. **Backend:**
   - Start command: `cd server && npm start`
   - Set environment variables in dashboard

4. **Database:**
   - Provision PostgreSQL database
   - Run migration scripts
   - Update connection string

**Cost**: Free tier available, paid plans start low

#### Option 4: Netlify

**Why Netlify:**
- Great for static sites + serverless functions
- Free tier available
- Easy GitHub integration

**Setup Steps:**

1. **Frontend:**
   - Connect GitHub repository
   - Build command: `cd client && npm run build`
   - Publish directory: `client/dist`

2. **Backend:**
   - Convert Express routes to Netlify Functions
   - Use `@netlify/functions` adapter

3. **Database:**
   - Use external service (Supabase, PlanetScale, etc.)

**Cost**: Free tier available

### Database Migration Strategy

**Current**: SQLite (file-based, not suitable for serverless/production)

**Recommended Migration Path:**

1. **Development**: Keep SQLite locally
2. **Production**: Migrate to PostgreSQL or Cloudflare D1

**Migration Steps:**

1. Create migration scripts to convert SQLite schema to PostgreSQL
2. Update database connection code to support both SQLite (dev) and PostgreSQL (prod)
3. Use environment variables to switch between databases:
   ```javascript
   const dbType = process.env.DB_TYPE || 'sqlite';
   const db = dbType === 'postgres' ? postgresConnection : sqliteConnection;
   ```

**Recommended Database Services:**
- **Vercel Postgres**: If using Vercel
- **Supabase**: Free PostgreSQL with great developer experience
- **Cloudflare D1**: If using Cloudflare (SQLite-compatible)
- **Railway Postgres**: If using Railway
- **PlanetScale**: Serverless MySQL alternative

### Hybrid Deployment Approach

For more control, you can deploy components separately:

- **Frontend**: Vercel/Netlify/Cloudflare Pages (static hosting)
- **Backend**: Railway/Render/Fly.io (Node.js service)
- **Database**: External PostgreSQL (Supabase, PlanetScale)

This approach gives more flexibility but requires managing multiple services.

### Environment Variables for Production

Ensure all these are set in your deployment platform:

**Backend:**
```
PORT=3001 (or platform-assigned port)
JWT_SECRET=<strong-random-secret>
JWT_EXPIRES_IN=24h
REFRESH_TOKEN_SECRET=<strong-random-secret>
REFRESH_TOKEN_EXPIRES_IN=7d
STRIPE_TEST_KEY=<your-stripe-key>
STRIPE_SECRET_KEY=<your-stripe-secret-key>
NODE_ENV=production
DATABASE_URL=<postgres-connection-string>
DB_TYPE=postgres
```

**Frontend:**
```
VITE_API_URL=<your-backend-api-url>
VITE_STRIPE_PUBLIC_KEY=<your-stripe-public-key>
```

### Continuous Deployment

All recommended platforms support automatic deployments:

1. Connect your GitHub repository
2. Configure build settings
3. Set environment variables
4. Push to main branch triggers automatic deployment

### Monitoring and Logs

- **Vercel**: Built-in analytics and logs
- **Cloudflare**: Workers analytics dashboard
- **Railway/Render**: Built-in logging and metrics
- **Netlify**: Function logs and analytics

## üì± Responsive Design

The application is mobile-first with optimized layouts for:
- Mobile (< 768px)
- Tablet (768px - 1024px)
- Desktop (> 1024px)

Mobile features:
- Touch-optimized product cards
- Swipe for product images
- Sticky add to cart button
- Bottom navigation bar
- Collapsible filters

## üß™ Development Features

### Feature List
The project includes `feature_list.json` with 200+ detailed test cases covering:
- Functional features (authentication, cart, checkout, admin, etc.)
- Style/UI features (responsive design, components, animations)

### Testing Strategy
Each feature in `feature_list.json` includes:
- Category (functional/style)
- Description
- Step-by-step testing instructions
- Pass/fail status

## üì¶ Project Structure

```
shopflow/
‚îú‚îÄ‚îÄ server/                 # Backend Express application
‚îÇ   ‚îú‚îÄ‚îÄ src/               # Source code
‚îÇ   ‚îú‚îÄ‚îÄ database/          # SQLite database files
‚îÇ   ‚îî‚îÄ‚îÄ .env              # Environment variables
‚îú‚îÄ‚îÄ client/                # Frontend React application
‚îÇ   ‚îú‚îÄ‚îÄ src/              # Source code
‚îÇ   ‚îî‚îÄ‚îÄ public/           # Static assets
‚îú‚îÄ‚îÄ feature_list.json     # Comprehensive test cases
‚îú‚îÄ‚îÄ init.sh              # Setup script
‚îî‚îÄ‚îÄ README.md            # This file
```

## üöß Development Workflow

This project is designed for autonomous multi-session development:

1. **Session 1 (Current)**: Foundation setup
   - Project structure
   - Feature list creation
   - Initial setup scripts

2. **Future Sessions**: Iterative implementation
   - Work on features from `feature_list.json`
   - Mark features as passing when complete
   - Commit progress regularly
   - Never remove features from the list

## üìù Contributing

This is an autonomous coding project. When working on features:

1. Select features from `feature_list.json` in priority order
2. Implement and test thoroughly
3. Mark `"passes": true` only when fully working
4. Commit changes with descriptive messages
5. Never edit or remove features from the list

## üéØ Success Criteria

### Functionality
- Complete purchase flow works end-to-end
- Cart syncs between sessions
- Search returns relevant results
- Filters work correctly
- Reviews display and submit

### Performance
- Product listing loads under 2s
- Images lazy load properly
- Checkout completes under 5s
- Mobile performance score > 85

### Design
- Professional e-commerce appearance
- Consistent branding
- Mobile-responsive at all breakpoints
- Clear CTAs and conversion paths

## üìÑ License

This is a demo project for learning purposes.

## ü§ù Support

For issues or questions, refer to the comprehensive `feature_list.json` which includes detailed test cases for every feature.

---

**Built with ‚ù§Ô∏è for autonomous coding demonstrations**
